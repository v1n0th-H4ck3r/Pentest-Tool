import requests
import re

def find_subdomains(domain):
    subdomains = set()

    try:
        url = f"https://crt.sh/?q=%25.{domain}&output=json"
        response = requests.get(url)
        if response.status_code == 200:
            data = response.json()
            for entry in data:
                name_value = entry['name_value']
                if '*' not in name_value:
                    subdomains.add(name_value)
        else:
            print(f"Error querying crt.sh: {response.status_code}")
    except Exception as e:
        print(f"An error occurred: {e}")

    return subdomains

